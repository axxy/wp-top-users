{"version":3,"file":"top-users-block/view.js","mappings":";;;;AAAAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAY;EACzD,MAAMC,cAAc,GAAGF,QAAQ,CAACG,gBAAgB,CAC/C,sCACD,CAAC;EAEDD,cAAc,CAACE,OAAO,CAAC,MAAOC,KAAK,IAAK;IACvC,MAAMC,SAAS,GAAGD,KAAK,CAACE,aAAa,CAAC,4BAA4B,CAAC;IACnE,MAAMC,KAAK,GAAGF,SAAS,CAACG,OAAO,CAACD,KAAK,IAAI,MAAM;IAC/C,MAAME,aAAa,GAAGC,QAAQ,CAACL,SAAS,CAACG,OAAO,CAACC,aAAa,CAAC,IAAI,CAAC;IACpE,MAAME,KAAK,GAAGZ,QAAQ,CAACa,aAAa,CAAC,IAAI,CAAC;IAC1CD,KAAK,CAACE,WAAW,GAAG,OAAOJ,aAAa,QAAQ;IAChDJ,SAAS,CAACS,WAAW,CAACH,KAAK,CAAC;IAE5B,IAAI;MACH,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAC3B,0CAA0CP,aAAa,EACxD,CAAC;MACD,IAAIQ,KAAK,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAEjCD,KAAK,CAACE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QACpB,OAAOd,KAAK,KAAK,KAAK,GACnBa,CAAC,CAACE,iBAAiB,GAAGD,CAAC,CAACC,iBAAiB,GACzCD,CAAC,CAACC,iBAAiB,GAAGF,CAAC,CAACE,iBAAiB;MAC7C,CAAC,CAAC;MAEF,MAAMC,SAAS,GAAGxB,QAAQ,CAACa,aAAa,CAAC,IAAI,CAAC;MAC9CW,SAAS,CAACC,SAAS,GAAG,gBAAgB;MAEtCP,KAAK,CAACd,OAAO,CAAEsB,IAAI,IAAK;QACvB,MAAMC,QAAQ,GAAG3B,QAAQ,CAACa,aAAa,CAAC,IAAI,CAAC;QAC7Cc,QAAQ,CAACC,SAAS,GAAG,WAAWF,IAAI,CAACG,IAAI,kCAAkCH,IAAI,CAACH,iBAAiB,EAAE;QACnGC,SAAS,CAACT,WAAW,CAACY,QAAQ,CAAC;MAChC,CAAC,CAAC;MAEFrB,SAAS,CAACsB,SAAS,GAAG,WAAWlB,aAAa,aAAa;MAC3DJ,SAAS,CAACS,WAAW,CAACS,SAAS,CAAC;IACjC,CAAC,CAAC,OAAOM,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjDxB,SAAS,CAACQ,WAAW,GAAG,0BAA0B;IACnD;EACD,CAAC,CAAC;AACH,CAAC,CAAC,C","sources":["webpack://top-users-block/./src/top-users-block/view.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n\tconst topUsersBlocks = document.querySelectorAll(\n\t\t\".wp-block-ahmedyahya-top-users-block\",\n\t);\n\n\ttopUsersBlocks.forEach(async (block) => {\n\t\tconst container = block.querySelector(\".top-users-block-container\");\n\t\tconst order = container.dataset.order || \"desc\";\n\t\tconst numberOfUsers = parseInt(container.dataset.numberOfUsers) || 5;\n\t\tconst title = document.createElement(\"h2\");\n\t\ttitle.textContent = `Top ${numberOfUsers} Users`;\n\t\tcontainer.appendChild(title);\n\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`/wp-json/ahmedyahya/v1/top-users?limit=${numberOfUsers}`,\n\t\t\t);\n\t\t\tlet users = await response.json();\n\n\t\t\tusers.sort((a, b) => {\n\t\t\t\treturn order === \"asc\"\n\t\t\t\t\t? a.total_order_value - b.total_order_value\n\t\t\t\t\t: b.total_order_value - a.total_order_value;\n\t\t\t});\n\n\t\t\tconst usersList = document.createElement(\"ul\");\n\t\t\tusersList.className = \"top-users-list\";\n\n\t\t\tusers.forEach((user) => {\n\t\t\t\tconst listItem = document.createElement(\"li\");\n\t\t\t\tlistItem.innerHTML = `<strong>${user.name}</strong> Total orders amount: ${user.total_order_value}`;\n\t\t\t\tusersList.appendChild(listItem);\n\t\t\t});\n\n\t\t\tcontainer.innerHTML = `<h2>Top ${numberOfUsers} Users</h2>`;\n\t\t\tcontainer.appendChild(usersList);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error fetching top users:\", error);\n\t\t\tcontainer.textContent = \"Error loading top users.\";\n\t\t}\n\t});\n});\n"],"names":["document","addEventListener","topUsersBlocks","querySelectorAll","forEach","block","container","querySelector","order","dataset","numberOfUsers","parseInt","title","createElement","textContent","appendChild","response","fetch","users","json","sort","a","b","total_order_value","usersList","className","user","listItem","innerHTML","name","error","console"],"sourceRoot":""}